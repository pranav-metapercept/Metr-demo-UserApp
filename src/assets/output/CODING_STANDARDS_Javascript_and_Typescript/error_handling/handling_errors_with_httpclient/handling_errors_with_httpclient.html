<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en"><head><meta charset="UTF-8"><meta name="copyright" content="(C) Copyright 2023"><meta name="generator" content="DITA-OT"><title>Handling Errors with HttpClient</title><link rel="stylesheet" type="text/css" href="../../../commonltr.css"></head><body id="d3aAnx"><nav class="toc" role="navigation"><ul><li><a href="../../../CODING_STANDARDS_Javascript_and_Typescript/introduction/introduction.html">Introduction</a></li><li><a href="../../../CODING_STANDARDS_Javascript_and_Typescript/use_angular_cli/use_angular_cli.html">Use Angular CLI</a></li><li><a href="../../../CODING_STANDARDS_Javascript_and_Typescript/maintain_proper_folder_structure/maintain_proper_folder_structure.html">Maintain proper folder structure</a></li><li><a href="../../../CODING_STANDARDS_Javascript_and_Typescript/follow_consistent_angular_coding_styles/follow_consistent_angular_coding_styles.html">Follow consistent Angular coding styles</a></li><li><a href="../../../CODING_STANDARDS_Javascript_and_Typescript/use_es6_features/use_es6_features.html">Use ES6 features</a></li><li><a href="../../../CODING_STANDARDS_Javascript_and_Typescript/use_trackby_along_with_ngfor/use_trackby_along_with_ngfor.html">Use trackBy along with ngFor</a></li><li><a href="../../../CODING_STANDARDS_Javascript_and_Typescript/break_down_into_small_reusable_components/break_down_into_small_reusable_components.html">Break down into small reusable components</a></li><li><a href="../../../CODING_STANDARDS_Javascript_and_Typescript/use_lazy_loading/use_lazy_loading.html">Use Lazy Loading</a></li><li><a href="../../../CODING_STANDARDS_Javascript_and_Typescript/use_index_ts/use_index_ts.html">Use Index.ts</a></li><li><a href="../../../CODING_STANDARDS_Javascript_and_Typescript/avoid_logic_in_templates/avoid_logic_in_templates.html">Avoid logic in templates</a></li><li><a href="../../../CODING_STANDARDS_Javascript_and_Typescript/_cache_api_calls/_cache_api_calls.html">Cache API calls</a></li><li><a href="../../../CODING_STANDARDS_Javascript_and_Typescript/use_async_pipe_in_templates/use_async_pipe_in_templates.html">Use async pipe in templates</a></li><li><a href="../../../CODING_STANDARDS_Javascript_and_Typescript/declare_safe_strings/declare_safe_strings.html">Declare safe strings</a></li><li><a href="../../../CODING_STANDARDS_Javascript_and_Typescript/avoid_any_type_when_declaring_constants_and_variables/avoid_any_type_when_declaring_constants_and_variables.html">Avoid any type when declaring constants and variables</a></li><li><a href="../../../CODING_STANDARDS_Javascript_and_Typescript/state_management/state_management.html">State management</a></li><li><a href="../../../CODING_STANDARDS_Javascript_and_Typescript/use_cdk_virtual_scroll/use_cdk_virtual_scroll.html">Use CDK Virtual Scroll</a></li><li><a href="../../../CODING_STANDARDS_Javascript_and_Typescript/use_environment_variables/use_environment_variables.html">Use environment variables</a></li><li><a href="../../../CODING_STANDARDS_Javascript_and_Typescript/use_lint_rules_for_typescript_and_scss/use_lint_rules_for_typescript_and_scss.html">Use lint rules for Typescript and SCSS</a></li><li><a href="../../../CODING_STANDARDS_Javascript_and_Typescript/always_document_the_code/always_document_the_code.html">Always document the code</a></li><li><a href="../../../CODING_STANDARDS_Javascript_and_Typescript/write_readable_code/write_readable_code.html">Write readable code</a></li><li><a href="../../../CODING_STANDARDS_Javascript_and_Typescript/file_names/file_names.html">File names</a></li><li><a href="../../../CODING_STANDARDS_Javascript_and_Typescript/variable_and_function_names/variable_and_function_names.html">Variable and function names</a></li><li><a href="../../../CODING_STANDARDS_Javascript_and_Typescript/write_small_pure_functions/write_small_pure_functions.html">Write small pure functions</a></li><li><a href="../../../CODING_STANDARDS_Javascript_and_Typescript/remove_unused_code/remove_unused_code.html">Remove unused code</a></li><li><a href="../../../CODING_STANDARDS_Javascript_and_Typescript/avoid_code_comments/avoid_code_comments.html">Avoid code comments</a></li><li><a href="../../../CODING_STANDARDS_Javascript_and_Typescript/best_practices_for_angular_unit_test_cases/best_practices_for_angular_unit_test_cases.html">Best practices for Angular unit test cases</a></li><li><a href="../../../CODING_STANDARDS_Javascript_and_Typescript/error_handling/error_handling.html">Error handling</a></li><li class="active"><a href="../../../CODING_STANDARDS_Javascript_and_Typescript/error_handling/handling_errors_with_httpclient/handling_errors_with_httpclient.html">Handling Errors with HttpClient</a></li><li><a href="../../../CODING_STANDARDS_Javascript_and_Typescript/error_handling/handling_errors_with_httpinterceptor/handling_errors_with_httpinterceptor.html">Handling Errors with HttpInterceptor</a><ul><li><a href="../../../CODING_STANDARDS_Javascript_and_Typescript/error_handling/handling_errors_with_httpinterceptor/heaging_3.html">Heaging 3</a></li><li><a href="../../../CODING_STANDARDS_Javascript_and_Typescript/error_handling/handling_errors_with_httpinterceptor/part1_heaging_3.html">Part1_Heaging 3</a></li><li><a href="../../../CODING_STANDARDS_Javascript_and_Typescript/error_handling/handling_errors_with_httpinterceptor/part2_heaging_3.html">Part2_Heaging 3</a></li></ul></li></ul></nav><main role="main"><article role="article" aria-labelledby="ariaid-title1">
   <h1 class="title topictitle1" id="ariaid-title1">Handling Errors with HttpClient</h1>
   <div class="body">
      <p class="p Para">By using Angular's&nbsp;HttpClient&nbsp;along with catchError from RxJS, we can easily write a function to handle errors within each service.&nbsp;HttpClient&nbsp;will also conveniently parse JSON responses and return a JavaScript object in the observable. There are two categories of errors which need to be handled differently:</p>
      <p class="p Para">Client-side: Network problems and front-end code errors. With&nbsp;HttpClient, these errors return&nbsp;ErrorEvent&nbsp;instances. Server-side: AJAX errors, user errors, back-end code errors, database errors, file system errors. With&nbsp;HttpClient, these errors return HTTP Error Responses.</p>
      <p class="p Para">By verifying if an error is an instance of&nbsp;ErrorEvent, we can figure out which type of error we have and handle it accordingly.</p>
      <p class="p Para">This is a good solution for just one service, but a real app contains numerous services that can all potentially throw errors. Unfortunately, this solution requires copying the&nbsp;handleError&nbsp;function across all services, which is a very serious anti-pattern in Angular development. If the way we handle errors needs to change, then we have to update every single&nbsp;handleError&nbsp;function across every service. This is counter-productive and can easily lead to more bugs. We need an efficient way to handle errors globally across the entire application. Fortunately, Angular supports this using&nbsp;HttpInterceptor.</p>
      <p class="p Para">Here is an example service which uses this basic form of error handling:</p>
      <table class="table"><caption></caption><colgroup><col style="width:90.16%"></colgroup><tbody class="tbody">
               <tr class="row">
                  <td class="entry">
                     <p class="p">import { HttpClient } from '@angular/common/http';</p>
                     <p class="p">@Injectable()</p>
                     <p class="p">export class PublishService {</p>
                     <p class="p">  constructor( private http: HttpClient ) {</p>
                     <p class="p">  }</p>
                     <p class="p">publish(data: any): Observable&lt;ServerResponse&gt; {</p>
                     <p class="p">    const formData = new FormData();</p>
                     <p class="p">    Object.keys(data).forEach(key =&gt; formData.append(key, data[key]));</p>
                     <p class="p">    return this.http.post&lt;ServerResponse&gt;(`${endpoint.publishUrl}`, formData).</p>
                     <p class="p">    pipe(catchError(this.handleError));</p>
                     <p class="p">  }</p>
                     <p class="p">  handleError(error){</p>
                     <p class="p">      return throwError(error.message || "server Error");   }  </p>
                  </td>
               </tr>
            </tbody></table>
      <p class="p Para">While&nbsp;ErrorHandler&nbsp;is a useful way to handle errors across an app,&nbsp;HttpInterceptor&nbsp;provides a much more robust solution for handling server and connection-related errors giving the ability to retry or return a richer error response to the client.</p>
   </div>
</article></main></body></html>